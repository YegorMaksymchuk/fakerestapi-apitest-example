{
  "info": {
    "_postman_id": "892754dc-6b60-4591-b675-9047c5696350",
    "name": "Fake REST API - Users",
    "description": "Reusable collection for Users endpoints: Atomic and E2E Flow. Uses collection-level variables, response reuse (userId), and dynamic id generation. Optional Bearer token (env or collection authToken) per assignment requirement.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "3873284"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Users – Atomic",
      "item": [
        {
          "name": "GET Users (list) – positive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response is array', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.be.an('array');",
                  "});",
                  "pm.test('Response matches schema (array of User)', function () {",
                  "    var schema = { type: 'array', items: JSON.parse(pm.collectionVariables.get('userSchema')) };",
                  "    pm.response.to.have.jsonSchema(schema);",
                  "});",
                  "// firstUserIdFromList: fallback for POST userId when the fake API returns id=0.",
                  "// Used in POST test to ensure subsequent GET/PUT/DELETE target a real user.",
                  "pm.test('Set firstUserIdFromList from response', function () {",
                  "    var body = pm.response.json();",
                  "    if (body && body.length > 0 && body[0].id !== undefined) {",
                  "        pm.collectionVariables.set('firstUserIdFromList', body[0].id);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "POST User – positive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response has id', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    var id = body.id;",
                  "    if (id !== 0 && id !== undefined) { pm.collectionVariables.set('userId', id); }",
                  "    else {",
                  "        var first = pm.collectionVariables.get('firstUserIdFromList');",
                  "        if (first) { pm.collectionVariables.set('userId', first); }",
                  "        else { pm.collectionVariables.set('userId', 1); }",
                  "    }",
                  "});",
                  "pm.test('Response has userName and password', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});",
                  "pm.test('Returned userName matches sent', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body.userName).to.eql(pm.collectionVariables.get('userName'));",
                  "});",
                  "pm.test('Response matches User schema', function () {",
                  "    var schema = JSON.parse(pm.collectionVariables.get('userSchema'));",
                  "    pm.response.to.have.jsonSchema(schema);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"{{userName}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "POST User – empty body – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response still has User shape', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body).to.have.keys('id','userName','password');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "POST User – missing fields – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('userName and password are null or empty', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body.userName).to.satisfy(function (v) { return v === null || v === ''; });",
                  "        pm.expect(body.password).to.satisfy(function (v) { return v === null || v === ''; });",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "POST User – invalid types – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 400', function () {",
                  "    pm.expect(pm.response.code).to.be.equals(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"abc\",\n  \"userName\": 123,\n  \"password\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET User by id (userId from POST) – positive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response id matches userId', function () {",
                  "    var body = pm.response.json();",
                  "    var expectedId = parseInt(pm.collectionVariables.get('userId'), 10);",
                  "    pm.expect(body.id).to.eql(expectedId);",
                  "});",
                  "pm.test('Response matches User schema', function () {",
                  "    var schema = JSON.parse(pm.collectionVariables.get('userSchema'));",
                  "    pm.response.to.have.jsonSchema(schema);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET User by randomIdInRange – equiv.",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var idMin = parseInt(pm.collectionVariables.get('idMin') || '1', 10);",
                  "var idMax = parseInt(pm.collectionVariables.get('idMax') || '100', 10);",
                  "var range = idMax - idMin + 1;",
                  "pm.collectionVariables.set('randomIdInRange', Math.floor(Math.random() * range) + idMin);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// May be 200 or 404 depending on existing data",
                  "pm.test('Status is 200 or 404', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has User shape', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body).to.have.keys('id','userName','password');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{randomIdInRange}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{randomIdInRange}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET User by id=1 – boundary positive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.be.equals(200);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response id is 1', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body.id).to.eql(1);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET User by id=0 – boundary negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 404 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([404, 400]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "0"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET User by id=999999 – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 404', function () { pm.response.to.have.status(404); });"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "999999"
              ]
            }
          },
          "response": []
        },
        {
          "name": "PUT User by userId – positive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response has updated fields', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});",
                  "pm.test('Returned userName reflects update', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body.userName).to.match(/^updated_/);",
                  "});",
                  "pm.test('Response matches User schema', function () {",
                  "    var schema = JSON.parse(pm.collectionVariables.get('userSchema'));",
                  "    pm.response.to.have.jsonSchema(schema);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": {{userId}},\n  \"userName\": \"updated_{{userName}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "PUT User by id=999999 – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// API may return 200 (upsert) or 404 – swagger only documents 200",
                  "pm.test('Status is 200 or 404', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 999999,\n  \"userName\": \"ghost\",\n  \"password\": \"x\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "999999"
              ]
            },
            "description": "This task should verify REST architecture logic where PUT request used for Updating and POST for Creating of data.\n\nIn example we see PUT request get 200 with not existed user but expected result should return 201 Created.  \n[https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4)"
          },
          "response": []
        },
        {
          "name": "PUT User by id=null – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 400', function () {",
                  "    pm.expect(pm.response.code).to.be.equals(400);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 999999,\n  \"userName\": \"ghost\",\n  \"password\": \"x\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/null",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "null"
              ]
            },
            "description": "This task should verify REST architecture logic where PUT request used for Updating and POST for Creating of data.\n\nIn example we see PUT request get 200 with not existed user but expected result should return 201 Created.  \n[https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4](https://www.rfc-editor.org/rfc/rfc7231#section-4.3.4)"
          },
          "response": []
        },
        {
          "name": "DELETE User by userId – positive",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "DELETE User by id=999999 – negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 404 or 200', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([404, 200]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/999999",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "999999"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "Atomic endpoint tests: each request validates one endpoint/scenario. Order: GET list → POST (sets userId) → GET by id, boundaries, negatives, PUT, DELETE. Uses userId from POST and randomIdInRange for equivalence/boundary."
    },
    {
      "name": "Users – Boundary",
      "item": [
        {
          "name": "GET User id=-1 – int32 negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 404', function () {",
                  "    pm.expect(pm.response.code).to.eql(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/-1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "-1"]
            }
          },
          "response": []
        },
        {
          "name": "GET User id=2147483647 – int32 max",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 404', function () {",
                  "    pm.expect(pm.response.code).to.eql(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/2147483647",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "2147483647"]
            }
          },
          "response": []
        },
        {
          "name": "GET User id=-2147483648 – int32 min",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 404', function () {",
                  "    pm.expect(pm.response.code).to.eql(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/-2147483648",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "-2147483648"]
            }
          },
          "response": []
        },
        {
          "name": "GET User id=2147483648 – int32 overflow",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// 2147483648 exceeds int32 max, API should reject",
                  "pm.test('Status is 400', function () {",
                  "    pm.expect(pm.response.code).to.eql(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/2147483648",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "2147483648"]
            }
          },
          "response": []
        },
        {
          "name": "PUT User id=-1 – int32 negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 404', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": -1,\n  \"userName\": \"boundary_neg\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/-1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "-1"]
            }
          },
          "response": []
        },
        {
          "name": "DELETE User id=-1 – int32 negative",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 404', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/-1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "-1"]
            }
          },
          "response": []
        },
        {
          "name": "POST User id=2147483647 – int32 max body",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response id equals 2147483647', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body.id).to.eql(2147483647);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 2147483647,\n  \"userName\": \"int32_max\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST User id=-1 – int32 negative body",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response id equals -1', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body.id).to.eql(-1);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": -1,\n  \"userName\": \"neg_id\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST User id=2147483648 – int32 overflow body",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// 2147483648 exceeds int32 max, should be rejected",
                  "pm.test('Status is 400', function () {",
                  "    pm.expect(pm.response.code).to.eql(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 2147483648,\n  \"userName\": \"overflow\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST User – empty strings – string boundary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has User shape', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body).to.have.property('id');",
                  "        pm.expect(body).to.have.property('userName');",
                  "        pm.expect(body).to.have.property('password');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"\",\n  \"password\": \"\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST User – long strings (10000 chars) – string boundary",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var longStr = 'A'.repeat(10000);",
                  "pm.collectionVariables.set('longString', longStr);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400 or 413', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 413]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has User shape', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body).to.have.property('id');",
                  "        pm.expect(body).to.have.property('userName');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"{{longString}}\",\n  \"password\": \"{{longString}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST User – special characters – string boundary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has User shape with special chars', function () {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body).to.have.property('id');",
                  "        pm.expect(body).to.have.property('userName');",
                  "        pm.expect(body).to.have.property('password');",
                  "    });",
                  "    // NOTE: API reflects <script> tags without sanitization – potential XSS",
                  "    var raw = pm.response.text();",
                  "    if (raw.includes('<script>')) {",
                  "        pm.test('[WARN] API reflects HTML – potential XSS vulnerability', function () {",
                  "            pm.expect(true).to.be.true; // logged as warning, not failure",
                  "        });",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"<script>alert(1)</script>\",\n  \"password\": \"' OR 1=1 --\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST User – null fields – nullable boundary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Swagger defines userName and password as nullable",
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Response userName is null', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body.userName).to.eql(null);",
                  "});",
                  "pm.test('Response password is null', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body.password).to.eql(null);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": null,\n  \"password\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "PUT User – null fields – nullable boundary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Swagger defines userName and password as nullable",
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Response has User shape', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 1,\n  \"userName\": null,\n  \"password\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "1"]
            }
          },
          "response": []
        }
      ],
      "description": "Data-type boundary tests for the User model. Covers int32 min/max/overflow for id (path and body), string boundaries (empty, long, special chars), and nullable fields (explicit null for userName/password)."
    },
    {
      "name": "Users – Content-Type",
      "item": [
        {
          "name": "POST – text/json (supported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Response has User shape', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "text/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"ct_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST – application/*+json (supported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Response has User shape', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/*+json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"ct_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST – text/plain (unsupported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 415 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([415, 400]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "text/plain" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"ct_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST – application/xml (unsupported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 415 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([415, 400]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/xml" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"ct_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "POST – no Content-Type",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "pm.request.headers.remove('Content-Type');"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 415 or 400 or 200', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([415, 400, 200]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"ct_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "PUT – text/json (supported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Response has User shape', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "text/json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 1,\n  \"userName\": \"ct_put_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "1"]
            }
          },
          "response": []
        },
        {
          "name": "PUT – application/*+json (supported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "pm.test('Response has User shape', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/*+json; v=1.0" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 1,\n  \"userName\": \"ct_put_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "1"]
            }
          },
          "response": []
        },
        {
          "name": "PUT – text/plain (unsupported)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 415 or 400', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([415, 400]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "text/plain" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 1,\n  \"userName\": \"ct_put_test\",\n  \"password\": \"pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "1"]
            }
          },
          "response": []
        },
        {
          "name": "GET list – Accept text/json",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "pm.request.headers.upsert({ key: 'Accept', value: 'text/json; v=1.0' });"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "var ct = pm.response.headers.get('Content-Type') || '';",
                  "if (ct.includes('text/json')) {",
                  "    pm.test('Response Content-Type is text/json as requested', function () {",
                  "        pm.expect(ct).to.include('text/json');",
                  "    });",
                  "} else {",
                  "    pm.test('[INFO] API ignores Accept text/json – returns application/json', function () {",
                  "        pm.expect(ct).to.include('application/json');",
                  "    });",
                  "}",
                  "pm.test('Response is valid JSON array', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "GET list – Accept text/plain",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "pm.request.headers.upsert({ key: 'Accept', value: 'text/plain; v=1.0' });"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "var ct = pm.response.headers.get('Content-Type') || '';",
                  "if (ct.includes('text/plain')) {",
                  "    pm.test('Response Content-Type is text/plain as requested', function () {",
                  "        pm.expect(ct).to.include('text/plain');",
                  "    });",
                  "} else {",
                  "    pm.test('[INFO] API ignores Accept text/plain – returns application/json', function () {",
                  "        pm.expect(ct).to.include('application/json');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "GET list – Accept application/xml (unsupported)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "pm.request.headers.upsert({ key: 'Accept', value: 'application/xml' });"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 406 or 200', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([406, 200]);",
                  "});",
                  "if (pm.response.code === 200) {",
                  "    pm.test('[INFO] API ignores unsupported Accept and returns default', function () {",
                  "        pm.expect(true).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users"]
            }
          },
          "response": []
        },
        {
          "name": "GET by id – Accept text/json",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "pm.request.headers.upsert({ key: 'Accept', value: 'text/json; v=1.0' });"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "});",
                  "var ct = pm.response.headers.get('Content-Type') || '';",
                  "if (ct.includes('text/json')) {",
                  "    pm.test('Response Content-Type is text/json as requested', function () {",
                  "        pm.expect(ct).to.include('text/json');",
                  "    });",
                  "} else {",
                  "    pm.test('[INFO] API ignores Accept text/json – returns application/json', function () {",
                  "        pm.expect(ct).to.include('application/json');",
                  "    });",
                  "}",
                  "pm.test('Response has User shape', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    pm.expect(body).to.have.property('userName');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "Users", "1"]
            }
          },
          "response": []
        }
      ],
      "description": "Content-Type negotiation tests. Verifies API accepts all swagger-documented request content types (application/json, text/json, application/*+json) and rejects unsupported ones (text/plain, application/xml). Also tests response content negotiation via Accept header (text/json, text/plain, application/xml)."
    },
    {
      "name": "Users – E2E Flow",
      "item": [
        {
          "name": "1. POST User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response has id and set userId', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('id');",
                  "    var id = body.id;",
                  "    if (id !== 0 && id !== undefined) { pm.collectionVariables.set('userId', id); }",
                  "    else { pm.collectionVariables.set('userId', 1); }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"userName\": \"e2e_user_{{$randomInt}}\",\n  \"password\": \"e2e_pwd_{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "2. GET User by id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Body contains userId', function () {",
                  "    var body = pm.response.json();",
                  "    var expectedId = parseInt(pm.collectionVariables.get('userId'), 10);",
                  "    pm.expect(body.id).to.eql(expectedId);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. PUT User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response has updated fields', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});",
                  "pm.test('Response matches User schema', function () {",
                  "    var schema = JSON.parse(pm.collectionVariables.get('userSchema'));",
                  "    pm.response.to.have.jsonSchema(schema);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json; v=1.0"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": {{userId}},\n  \"userName\": \"e2e_updated\",\n  \"password\": \"e2e_updated_pwd\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "4. GET User by id (verify update)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('User object has userName and password', function () {",
                  "    var body = pm.response.json();",
                  "    pm.expect(body).to.have.property('userName');",
                  "    pm.expect(body).to.have.property('password');",
                  "});",
                  "pm.test('When 200, userName present (e2e_updated if API persists PUT)', function () {",
                  "    if (pm.response.code === 200) {",
                  "        var body = pm.response.json();",
                  "        pm.expect(body).to.have.property('userName');",
                  "        if (body.userName === 'e2e_updated') { pm.expect(body.userName).to.eql('e2e_updated'); }",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "5. DELETE User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response body is empty or valid JSON', function () {",
                  "    var text = pm.response.text();",
                  "    if (text && text.trim().length > 0) {",
                  "        pm.expect(function () { JSON.parse(text); }).to.not.throw();",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "6. GET User by id (expect 404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// A real persistent API should return 404 after DELETE.",
                  "// FakeRestAPI does not persist changes, so it may return 200.",
                  "pm.test('Status is 404 (expected) or 200 (fake API does not persist)', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([404, 200]);",
                  "});",
                  "if (pm.response.code === 404) {",
                  "    pm.test('404 response confirms user was deleted', function () {",
                  "        pm.expect(pm.response.code).to.eql(404);",
                  "    });",
                  "}",
                  "if (pm.response.code === 200) {",
                  "    pm.test('[INFO] Fake API did not persist DELETE – user still returned', function () {",
                  "        // This is expected behavior for FakeRestAPI",
                  "        pm.expect(true).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/Users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "Users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "End-to-end flow: POST → GET → PUT → GET (verify) → DELETE → GET (404). All use userId from POST. Run standalone or after Atomic."
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "var userSchema = { type: 'object', required: ['id', 'userName', 'password'], properties: { id: { type: 'integer' }, userName: { type: 'string' }, password: { type: 'string' } } };",
          "pm.collectionVariables.set('userSchema', JSON.stringify(userSchema));",
          "pm.request.headers.upsert({ key: 'Accept', value: 'application/json; v=1.0' });",
          "if (!pm.collectionVariables.get('userName')) {",
          "  pm.collectionVariables.set('userName', 'user_' + (Math.floor(Math.random() * 9000) + 1000));",
          "  pm.collectionVariables.set('password', 'pwd_' + Date.now());",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "pm.test('Response time is under 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "pm.test('Content-Type header is JSON-based', function () {",
          "    var ct = pm.response.headers.get('Content-Type') || '';",
          "    // DELETE may return empty body with no Content-Type",
          "    if (pm.request.method === 'DELETE' && ct === '') { return; }",
          "    // Error responses use application/problem+json",
          "    pm.expect(ct).to.match(/application\\/(json|problem\\+json)/);",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://fakerestapi.azurewebsites.net"
    },
    {
      "key": "authToken",
      "value": "mock-jwt-token-2026"
    },
    {
      "key": "userId",
      "value": ""
    },
    {
      "key": "userName",
      "value": ""
    },
    {
      "key": "password",
      "value": ""
    },
    {
      "key": "randomIdInRange",
      "value": "1"
    },
    {
      "key": "idMin",
      "value": "1"
    },
    {
      "key": "idMax",
      "value": "100"
    },
    {
      "key": "firstUserIdFromList",
      "value": ""
    },
    {
      "key": "userSchema",
      "value": "",
      "type": "default"
    },
    {
      "key": "longString",
      "value": ""
    }
  ]
}